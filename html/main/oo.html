
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>zeptoscript Object-Orientation &#8212; zeptoscript  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="zeptoscript Core Functionality" href="core.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="zeptoscript-object-orientation">
<h1>zeptoscript Object-Orientation<a class="headerlink" href="#zeptoscript-object-orientation" title="Permalink to this heading">¶</a></h1>
<p>zeptoscript optionally supports object-orientation. It is not traditional object-orientation in that there is no concept of inheritance, and methods are not declared as parts of particular classes. Rather, methods exist independent of any particular class, and any particular class can implement any set of methods. On the other hand, members are tied to individual classes, and cannot be used to access any other class.</p>
<p>Accesses to objects are safe in that any call to a method on an object that is not implemented by that object’s class and any call to a member accessor on an object whose class does not match the accessor will result in an exception being raised.</p>
<p>Unlike records, objects in zeptoscript are not syntactic sugar for cell sequences. Also unlike records, classes in zeptoscript may have constructor methods, named <code class="docutils literal notranslate"><span class="pre">new</span></code>, which are automatically called when the objects are constructed. Note that unlike in some languages, objects do not have destructors or finalizers, so if such behavior is desired, adding a destructor or finalizer method, which may be named <code class="docutils literal notranslate"><span class="pre">destroy</span></code>, is necessary.</p>
<p>Creating a class with <code class="docutils literal notranslate"><span class="pre">begin-class</span></code> ( “class-name” – ), followed by member and method definitions, and completed with <code class="docutils literal notranslate"><span class="pre">end-class</span></code> ( – ), creates a single instantiation word, named <code class="docutils literal notranslate"><span class="pre">make-</span></code> followed by the name of the class specified. This word takes whatever arguments one wishes to pass onto the class’s constructor, which are accompanied by the newly-constructed object, and returns the newly-constructed object.</p>
<p>Creating a member with <code class="docutils literal notranslate"><span class="pre">member:</span></code> ( “member-name” – ) within a class definition creates two accessor words, consisting of the member name followed by <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>, for the getter<code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">and</span> </code>!`, for the setter, which have the signatures ( <em>object</em> – <em>x</em> ) and ( <em>x</em> <em>object</em> – ) respectively. Note that these words must be defined before they may be referenced.</p>
<p>Implementing a method with <code class="docutils literal notranslate"><span class="pre">:method</span></code> ( “method-name” – ) followed by its code and completed with <code class="docutils literal notranslate"><span class="pre">;</span></code> ( – ) within a class definition implements the already-declared method with the specified name (which may include <code class="docutils literal notranslate"><span class="pre">::</span></code>) for that class. Note that the method must be declared ahead of time. When the method is called, the object for which it was called remains on the stack, so it can be used by the method. (Make sure to drop it off the stack.)</p>
<p>Here is a simple example of object-orientation in use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>private-module

zscript import
zscript-oo import

\ Declare our methods
method foo ( self -- )
method bar ( self -- )
method baz ( self -- )

\ Define one class which implements foo and bar
begin-class foobar

  \ Define the members of foobar
  member: foobar-x
  member: foobar-y

  \ Implement the methods of foobar

  \ Implement new, foobar&#39;s constructor
  :method new { x y self -- }
    x self foobar-x!
    y self foobar-y!
  ;

  \ Implement foo
  :method foo { self -- }
    .&quot; foobar-x: &quot; self foobar-x@ .
  ;

  \ Implement bar
  :method bar { self -- }
    .&quot; foobar-y: &quot; self foobar-y@ .
  ;

end-class

\ Define another class which implements bar and baz
begin-class barbaz

  \ Define the members of barbaz
  member: barbaz-y
  member: barbaz-z

  \ Implement the methods of barbaz

  \ Implement new, barbaz&#39;s constructor
  :method new { y z self -- }
    y self barbaz-y!
    z self barbaz-z!
  ;

  \ Implement bar
  :method bar { self -- }
    .&quot; barbaz-y: &quot; self barbaz-y@ .
  ;

  \ Implement baz
  :method baz { self -- }
    .&quot; barbaz-z: &quot; self barbaz-z@ .
  ;

end-class
</pre></div>
</div>
<p>With these definitions in place, one will get the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>0 1 make-foobar foo foobar-x: 0  ok
0 1 make-foobar bar foobar-y: 1  ok
0 1 make-foobar baz unimplemented method
1 2 make-barbaz foo unimplemented method
1 2 make-barbaz bar barbaz-y: 1  ok
1 2 make-barbaz baz barbaz-z: 2  ok
``

## `zscript-oo` Words

### `method`
( &quot;name&quot; -- )

Declare a method with a given name. This method is not tied to any given class, and should be declared outside of a class definition. The method is called with an object of a class which implements it on the top of the stack, and that object will be passed, along with any other arguments, on the top of the stack to the implementation of the method for that object&#39;s class. If the method is called on an object whose class does not implement the method `x-unimplemented-method` will be raised.

### `begin-class`
( &quot;name&quot; -- )

Begin the definition of a class with a given name. Note that this class will be instantiated with `make-`*name*, which is defined within the context of the class (so the class can construct an instance of itself). Any extra values provided will be passed to the class&#39;s `new` method if there is one, along with the newly-minted instance of the class on the top of the stack; afterwards the new object will be returned.

### `end-class`
( -- )

Finish the definition of a class.

### `member:`
( &quot;name&quot; -- )

Define a member with a given name in the context of the definition of a class to which it will belong. Note that the member will be get and set with two methods *name*`@` ( *object* -- *x* ), its getter, and *name*`!` ( *x* *object* --- ), its setter. These accessors may only be used to access the class for which they are defined; otherwise `x-member-not-for-class` will be raised.

### `:method`
( &quot;name&quot; -- )

Implement a method with a given name in the context of the definition of a class to which it will belong. The method must already be declared with `method`. If a name of a word that is not a method is provided `x-not-a-method` will be raised. The method implementation will be finished with `;`.

### `x-member-not-for-class`
( -- )

Member is accessed on an object of a class to which it does not belong exception.

### `x-unimplemented-method`
( -- )

Method is called on an object of a class for which it is not implemented exception.

### `x-not-a-method`
( -- )

Method is attempted to be implemented for a word which is not a method exception.
</pre></div>
</div>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">zeptoscript</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="core.html">zeptoscript Core Functionality</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">zeptoscript Object-Orientation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="core.html" title="previous chapter">zeptoscript Core Functionality</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2024, Travis Bemann.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/main/oo.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>